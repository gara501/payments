<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PieChart Test - Category Spending Breakdown</title>
  <script type="module">
    import React from 'https://esm.sh/react@19';
    import ReactDOM from 'https://esm.sh/react-dom@19/client';
    import { PieChart, Pie, Cell, ResponsiveContainer, Tooltip, Legend } from 'https://esm.sh/recharts@2.12.0';

    const { useState } = React;

    // Chart colors matching the design system
    const CHART_COLORS = {
      entertainment: '#3B82F6',
      productivity: '#10B981',
      health: '#EF4444',
      finance: '#F59E0B',
      general: '#6B7280',
    };

    // Sample data for category spending
    const categoryData = [
      { name: 'Entertainment', value: 45.97, color: CHART_COLORS.entertainment },
      { name: 'Productivity', value: 29.99, color: CHART_COLORS.productivity },
      { name: 'Health', value: 19.99, color: CHART_COLORS.health },
      { name: 'Finance', value: 12.99, color: CHART_COLORS.finance },
      { name: 'General', value: 9.99, color: CHART_COLORS.general },
    ];

    // Custom tooltip component
    const CustomTooltip = ({ active, payload }) => {
      if (active && payload && payload.length) {
        const data = payload[0];
        const total = categoryData.reduce((sum, item) => sum + item.value, 0);
        const percentage = ((data.value / total) * 100).toFixed(1);
        
        return React.createElement('div', {
          style: {
            backgroundColor: 'white',
            padding: '12px',
            border: '1px solid #E5E7EB',
            borderRadius: '8px',
            boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',
          }
        }, [
          React.createElement('p', { 
            key: 'name',
            style: { fontWeight: '500', color: '#111827', marginBottom: '4px' } 
          }, data.name),
          React.createElement('p', { 
            key: 'value',
            style: { fontSize: '14px', color: '#6B7280' } 
          }, `Value: $${data.value.toFixed(2)}`),
          React.createElement('p', { 
            key: 'percentage',
            style: { fontSize: '14px', color: '#6B7280' } 
          }, `Percentage: ${percentage}%`),
        ]);
      }
      return null;
    };

    // Main PieChart component
    const PieChartDemo = () => {
      const [innerRadius, setInnerRadius] = useState(50);
      const [outerRadius, setOuterRadius] = useState(90);
      const [showLegend, setShowLegend] = useState(true);

      const total = categoryData.reduce((sum, item) => sum + item.value, 0);

      return React.createElement('div', {
        style: {
          padding: '40px',
          maxWidth: '1200px',
          margin: '0 auto',
          fontFamily: 'system-ui, -apple-system, sans-serif',
        }
      }, [
        // Header
        React.createElement('div', { 
          key: 'header',
          style: { marginBottom: '40px' } 
        }, [
          React.createElement('h1', {
            key: 'title',
            style: {
              fontSize: '36px',
              fontWeight: 'bold',
              color: '#111827',
              marginBottom: '8px',
            }
          }, 'PieChart Component Test'),
          React.createElement('p', {
            key: 'subtitle',
            style: {
              fontSize: '18px',
              color: '#6B7280',
            }
          }, 'Category Spending Breakdown Visualization'),
        ]),

        // Controls
        React.createElement('div', {
          key: 'controls',
          style: {
            backgroundColor: 'white',
            padding: '24px',
            borderRadius: '12px',
            boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',
            marginBottom: '32px',
          }
        }, [
          React.createElement('h2', {
            key: 'controls-title',
            style: {
              fontSize: '20px',
              fontWeight: '600',
              marginBottom: '16px',
              color: '#111827',
            }
          }, 'Chart Controls'),
          
          // Inner Radius Control
          React.createElement('div', {
            key: 'inner-radius',
            style: { marginBottom: '16px' }
          }, [
            React.createElement('label', {
              key: 'label',
              style: {
                display: 'block',
                fontSize: '14px',
                fontWeight: '500',
                color: '#374151',
                marginBottom: '8px',
              }
            }, `Inner Radius: ${innerRadius}px`),
            React.createElement('input', {
              key: 'input',
              type: 'range',
              min: '0',
              max: '80',
              value: innerRadius,
              onChange: (e) => setInnerRadius(Number(e.target.value)),
              style: { width: '100%' }
            }),
          ]),

          // Outer Radius Control
          React.createElement('div', {
            key: 'outer-radius',
            style: { marginBottom: '16px' }
          }, [
            React.createElement('label', {
              key: 'label',
              style: {
                display: 'block',
                fontSize: '14px',
                fontWeight: '500',
                color: '#374151',
                marginBottom: '8px',
              }
            }, `Outer Radius: ${outerRadius}px`),
            React.createElement('input', {
              key: 'input',
              type: 'range',
              min: '60',
              max: '120',
              value: outerRadius,
              onChange: (e) => setOuterRadius(Number(e.target.value)),
              style: { width: '100%' }
            }),
          ]),

          // Legend Toggle
          React.createElement('div', {
            key: 'legend-toggle',
            style: { display: 'flex', alignItems: 'center', gap: '8px' }
          }, [
            React.createElement('input', {
              key: 'checkbox',
              type: 'checkbox',
              id: 'legend-toggle',
              checked: showLegend,
              onChange: (e) => setShowLegend(e.target.checked),
            }),
            React.createElement('label', {
              key: 'label',
              htmlFor: 'legend-toggle',
              style: {
                fontSize: '14px',
                fontWeight: '500',
                color: '#374151',
              }
            }, 'Show Legend'),
          ]),
        ]),

        // Chart Container
        React.createElement('div', {
          key: 'chart',
          style: {
            backgroundColor: 'white',
            padding: '32px',
            borderRadius: '12px',
            boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',
          }
        }, [
          React.createElement('h2', {
            key: 'chart-title',
            style: {
              fontSize: '24px',
              fontWeight: '600',
              marginBottom: '8px',
              color: '#111827',
            }
          }, 'Category Breakdown'),
          React.createElement('p', {
            key: 'chart-subtitle',
            style: {
              fontSize: '16px',
              color: '#6B7280',
              marginBottom: '24px',
            }
          }, `Total Spending: $${total.toFixed(2)}`),
          
          // PieChart
          React.createElement('div', {
            key: 'chart-wrapper',
            style: { width: '100%', height: '400px' }
          }, 
            React.createElement(ResponsiveContainer, { width: '100%', height: '100%' },
              React.createElement(PieChart, {},
                React.createElement(Pie, {
                  data: categoryData,
                  cx: '50%',
                  cy: '50%',
                  innerRadius: innerRadius,
                  outerRadius: outerRadius,
                  paddingAngle: 2,
                  dataKey: 'value',
                }, categoryData.map((entry, index) => 
                  React.createElement(Cell, { 
                    key: `cell-${index}`, 
                    fill: entry.color 
                  })
                )),
                React.createElement(Tooltip, { content: React.createElement(CustomTooltip) }),
                showLegend && React.createElement(Legend, { 
                  verticalAlign: 'bottom',
                  height: 36,
                })
              )
            )
          ),
        ]),

        // Data Table
        React.createElement('div', {
          key: 'data-table',
          style: {
            backgroundColor: 'white',
            padding: '24px',
            borderRadius: '12px',
            boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',
            marginTop: '32px',
          }
        }, [
          React.createElement('h2', {
            key: 'table-title',
            style: {
              fontSize: '20px',
              fontWeight: '600',
              marginBottom: '16px',
              color: '#111827',
            }
          }, 'Category Data'),
          React.createElement('table', {
            key: 'table',
            style: {
              width: '100%',
              borderCollapse: 'collapse',
            }
          }, [
            React.createElement('thead', { key: 'thead' },
              React.createElement('tr', {},
                ['Category', 'Value', 'Percentage', 'Color'].map((header, i) =>
                  React.createElement('th', {
                    key: i,
                    style: {
                      textAlign: 'left',
                      padding: '12px',
                      borderBottom: '2px solid #E5E7EB',
                      fontWeight: '600',
                      color: '#374151',
                    }
                  }, header)
                )
              )
            ),
            React.createElement('tbody', { key: 'tbody' },
              categoryData.map((item, index) => {
                const percentage = ((item.value / total) * 100).toFixed(1);
                return React.createElement('tr', { key: index }, [
                  React.createElement('td', {
                    key: 'name',
                    style: {
                      padding: '12px',
                      borderBottom: '1px solid #E5E7EB',
                    }
                  }, item.name),
                  React.createElement('td', {
                    key: 'value',
                    style: {
                      padding: '12px',
                      borderBottom: '1px solid #E5E7EB',
                    }
                  }, `$${item.value.toFixed(2)}`),
                  React.createElement('td', {
                    key: 'percentage',
                    style: {
                      padding: '12px',
                      borderBottom: '1px solid #E5E7EB',
                    }
                  }, `${percentage}%`),
                  React.createElement('td', {
                    key: 'color',
                    style: {
                      padding: '12px',
                      borderBottom: '1px solid #E5E7EB',
                    }
                  }, React.createElement('div', {
                    style: {
                      width: '40px',
                      height: '20px',
                      backgroundColor: item.color,
                      borderRadius: '4px',
                    }
                  })),
                ]);
              })
            ),
          ]),
        ]),
      ]);
    };

    // Render the app
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(React.createElement(PieChartDemo));
  </script>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: linear-gradient(to bottom right, #F9FAFB, #EFF6FF);
      min-height: 100vh;
    }
  </style>
</head>
<body>
  <div id="root"></div>
</body>
</html>
